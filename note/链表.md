### 一，链表（链式存储）的原理

和数组不一样，链表（Linked list）并不需要一整块连续的内存空间存储元素。链表的元素可以分散在内存空间的天涯海角，通过每个节点上的 `next`, `prev` 指针，将零散的内存块串联起来形成一个链式结构。**链表的本质是通过指针将一组零散的内存卡串联起来使用的线性表结构**。

> C/C++ 数组：一组具有相同类型数据的集合。结构体：不同类型数据的集合。
```cpp
// Definition for singly-linked list.
struct ListNode {
    int val;
    ListNode *next;
    ListNode(int x) : val(x), next(NULL) {}
};
```

### 二，常见的链表结构

链表结构五花八门，常见的有三种，分别是：**单链表、双向链表和循环链表**。我们首先来看最简单、最常用的单链表。单链表的可视化如下图所示：

![单链表](.././/images/linked_list/single_linked_list.png)

单链表有两个特殊节点：
- **头节点**：头结点用来记录链表的基地址，有了它，我们就可以遍历得到整条链表。
- **尾节点**：指针不是指向下一个结点，而是指向一个空地址 NULL，表示这是链表上最后一个结点。

与数组一样，链表也支持数据的查找、插入和删除操作。不同的是，链表的插入和删除操作只需要考虑相邻结点的指针改变，对应的时间复杂度是 $O(1)$。

有利就有弊，链表的链式存储带来了插入和删除操作的高效性，但是查找操作就比较复杂了，因为非连续存储，所以无法通过寻址公式就能直接计算出对应的内存地址，**而是需要根据指针一个结点一个结点地依次遍历，直到找到相应的结点**，需要 $O(n)$ 的时间复杂度，链表随机访问的性能没有数组好。

#### 2.1，链表的常见操作

**1，删除指定节点**

先遍历到**指定节点的前一个节点**，然后通过将前一个节点的 next 指针指向指定节点的下一个节点，达到**悬空指定节点**的效果，然后删除指定节点即可。

**2，修改指定节点**

遍历到指定节点的位置，将其数据域 data 修改为要修改的值即可。修改代码请参考后面的完整代码。

**3，链表反转**

实现反转链表的过程，我们可以分成几个简单的步骤：

1. **初始化三个指针**：我们需要三个指针来追踪当前节点、前一个节点和下一个节点。开始时，我们设置 prev（前一个节点）为 nullptr，因为链表的第一个节点反转后应该指向 nullptr。
2. **遍历链表**：从链表的头节点开始，逐个访问每个节点。
3. **临时存储下一个节点**：在每次迭代中，我们首先存储当前节点的下一个节点，因为等下我们需要更新当前节点的next指针。
4. **反转指向**：将当前节点的 next 指针指向 prev，这样当前节点就指向了前一个节点，实现了反转。
5. **更新前一个节点和当前节点**：将 prev 更新为当前节点，然后移动current到之前存储的下一个节点。
6. **重复以上步骤**：继续这个过程，直到遍历完整个链表。
7. **更新头节点**：遍历结束后，prev 指针将指向原链表的最后一个节点，这个节点的 next 是 nullptr，所以它将成为反转后链表的新头节点。

**4，总结**

**节点的任何操作，学会遍历到指定节点位置是最基本的基础，而后还要注意边界处理条件，比如空节点、只有一个节点和代码如何处理头节点和尾节点**。

### 三，写链表代码的技巧

#### 3.1，技巧一：理解指针或引用的含义

指针：指针存放某个对象地址。将某个变量赋值给指针，实际上就是将这个变量的地址赋值给指针。

#### 3.2，警惕指针丢失和内存泄露

+ 插入节点时，一定要注意操作是顺序；
+ 删除链表时，也一定要记住手动释放内存空间。

#### 3.3，利用哨兵简化实现难度

针对链表的插入、删除操作，需要对插入第一个节点和删除最后一个节点的情况进行特殊处理。`head = null` 表示链表中没有节点，`head` 表示头节点，指向链表中的第一个节点。

引入哨兵节点，哨兵节点不管链表是否空，`head` 指针都会已知指向哨兵节点。有哨兵节点的链表叫作**带头链表**，反之则是**不带头链表**。

利用哨兵简化编程难度的技巧再插入排序、归并排序、动态规划等代码中都有用到。

#### 3.4，重点留意边界处理条件

写链表代码一定要检查以下情况下，代码逻辑能否正常工作。

+ 链表为空；
+ 链表只有一个节点；
+ 代码处理头节点和尾节点

#### 3.5，举例画图，辅助思考

处了举例画图辅助我们思考问题之外，剩下最关键的就是多写多练、熟能生巧。 `5` 个常见链表操作如下：

+ 单链表反转
+ 链表中环的检测
+ 两个有序链表的合并
+ 删除链表倒数第 `n` 个节点
+ 求链表的中间节点

### 参考资料

- [链表（下）：如何轻松写出正确的链表代码？](https://time.geekbang.org/column/article/41149)
- [链表（链式存储）基本原理](https://labuladong.online/algo/data-structure-basic/linkedlist-basic/)

